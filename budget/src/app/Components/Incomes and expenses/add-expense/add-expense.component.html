 <p>add-expense works!</p>
<meta charset="utf-8" />
  <div class="wrapper">
    <div class="logo">
        <img src="../../../../assets/image/Logo.jpg" alt="">
    </div>
    <div class="text-center mt-4 name">
        in & out
    </div>
   
    <form class="p-3 mt-3" [formGroup]="eventForm" (ngSubmit)="AddExpense()">

 
        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <input type="date" id="date" placeholder="תאריך ההוצאה"
             formControlName="date" name="date" required/>
        </div>
 
        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <input type="number"  id="sum" placeholder="סכום"
             formControlName="sum" name="sum" required/>
        </div>

        <!-- בחירה מתוך תיבה נפתחת -->      
        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <select (change)="filterByCategory()" class="form-field d-flex align-items-center"
             placeholder="בחר קטגוריה" [(ngModel)] ="idCategory"
            formControlName="category" required>
                <option type="number" *ngFor="let t of listCategory" [ngValue]="t.id" required>
                    <label > {{t.detail}} </label>  
                </option>
                <option  type="text"  [ngValue]=-1  required >
                    <label > הוסף קטגוריה </label> 
                </option>
            </select>

        </div>

            <div *ngIf="idCategory==-1" class="form-field d-flex align-items-center">
                <input type="text" [(ngModel)]="nameNewCategory" [ngModelOptions]="{standalone: true}" placeholder="שם הקטגוריה"/>
                <i class="bi bi-check-circle" (click)="AddCategory()"></i>
            </div>

        <!-- -  בחירה מתוך תיבה נפתחת - לפני בחירת קטגוריה לא יוצג פירוט -->      
        <div *ngIf="idCategory==null; else byCtegory" class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <select class="form-field d-flex align-items-center" placeholder="בחר תת קטגוריה"  
            formControlName="subCategory"  required>
                <option  type="text" *ngFor="let t of listSubcategory" [ngValue]="t.id" required>
                    <label> {{t.detail}} </label> 
                </option>
              
            </select>
        </div>
 
        <ng-template #byCtegory>
          <!-- בחירה מתוך תיבה נפתחת לאחר שהוזנו נתונים בתיבת קטגוריה -->      
          <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <select class="form-field d-flex align-items-center" placeholder="בחר תת קטגוריה"  
            formControlName="subCategory" [(ngModel)] ="idSubcategory" required>
                <option  type="text" *ngFor="let t of listSubcategoryByCategory" [ngValue]="t.id" required>
                    <label> {{t.detail}} </label> 
                </option>
                <option  type="text"  [ngValue]=-1 required>
                    <label> הוסף תת קטגוריה </label> 
                 </option>
            </select>
       
             </div>
              <div *ngIf="idSubcategory==-1" class="form-field d-flex align-items-center">
                    <input type="text" [(ngModel)]="nameNewSubCategory" [ngModelOptions]="{standalone: true}" placeholder="שם תת קטגוריה"/>
                    <i class="bi bi-check-circle" (click)="AddSubcategory()"></i>
                </div>
        </ng-template>

        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <input type="text"  id="detail" placeholder="פרטים"
            formControlName="detail" name="detail" required/>
        </div>

        <!-- בחירה מתוך תיבה נפתחת -->      
        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <select class="form-field d-flex align-items-center" placeholder="בחר אופן תשלום"  
            formControlName="paymentMethod" required>
                <option  type="text" *ngFor="let t of listPaymentMethod" [ngValue]="t.id" required>
                    <label> {{t.detail}} </label>  
                </option>
            </select>
        </div>
  
        <div class="form-field d-flex align-items-center">
            <span class="fas fa-key"></span>
            <input type="checkbox"  id="frequency" placeholder="הוצאה קבועה"
            formControlName="frequency" name="frequency" />
        </div>
<!-- 
       <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <input type="number"  id="numberOfPayments" placeholder="מספר תשלומים"
            formControlName="numberOfPayments" name="numberOfPayments" required/>
        </div> -->

        <!-- בחירה מתוך תיבה נפתחת -->      
        <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <select class="form-field d-flex align-items-center" placeholder="בחר סטטוס הוצאה"  formControlName="status" required>
                <option  type="checkbox" *ngFor="let t of listStatus" [ngValue]="t.id" required>
                    <label> {{t.detail}} </label>  
                </option>
            </select>
        </div>
  
       <div class="form-field d-flex align-items-center">
            <span class="far fa-user"></span>
            <input type="text"  id="document" placeholder="צירוף מסמך"
            formControlName="document" name="document" />
        </div>
        
        <button class="btn mt-3" type="submit" [disabled]="!eventForm.valid">הוסף</button>

    </form>
   
</div> 