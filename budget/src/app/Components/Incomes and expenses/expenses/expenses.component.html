<p>פירוט הוצאות
</p>
<!--
<button (click)="ShowAllExpenses()">
    הצג כל ההוצאות
  </button>

 <p>
    <label >הכנס קטגוריה: </label>
<input  type="text" 
 name="question" [(ngModel)]="CategoryToShow"  >
   {{CategoryToShow}} 

</p>

 <button (click)="ShowExpensesByCategory()">
    הוצאות לפי קטגוריה
  </button> -->
  <div >

    <h5>סינון לפי תאריך</h5>
    <div class="input-group input-daterange row">
    <div class="col-2">
      <h6> החל מתאריך - </h6>
      <input type="date" class="form-control" title="תאריך התחלה" id="DateStart" [(ngModel)]="DateStart"
      (change)="search()" name="DateStart" value="{{ DateStart | date:'yyyy-MM-dd' }}" required>

    </div>
    <div class="col-2">
      <h6> עד תאריך -</h6>
      <input type="date" class="form-control" title="תאריך סיום" id="DateEnd" [(ngModel)]="DateEnd"
      (change)="search()" name="DateEnd">
    </div>

    <div class="form-fieldd-flex align-items-center col-2">
      <h6 >סטטוס הוצאה לתצוגה</h6>
      <select class="form-select" placeholder="בחר סטטוס הוצאה" formControlName="status"
      (change)="search()" [(ngModel)]="idStatus" >
        <option  [ngValue]=0>
        הצג הכל 
        </option>
        <option type="text" *ngFor="let t of listStatus" [ngValue]="t.id" >
          <label> {{t.detail}} </label>
        </option>
      </select>
    </div>

    <div class="form-fieldd-flex align-items-center col-2">
      <!-- <input type="checkbox" id="category" placeholder=" סינון לפי קטגוריה" /> -->
      <h6>סינון לפי קטגוריה</h6>
       <!-- [ngModelOptions]="{standalone: true}"  -->

      <select  (change)="search();filterByCategory()" class="form-select"  aria-label="Default select example"
         [(ngModel)]="idCategory"  >
        
          <option selected>בחר קטגוריה</option>
          <option *ngFor="let t of listCategory" [ngValue]="t.id" >
              <label> {{t.detail}} </label>
          </option>
      </select>

    </div>

      <div class="form-fieldd-flex align-items-center col-2">
              <div *ngIf="idCategory==0; else byCtegory" ></div>

    <ng-template #byCtegory>

      <h6>סינון לפי תת קטגוריה</h6>
       <!-- [ngModelOptions]="{standalone: true}"  -->

      <select  (change)="search()" class="form-select"  aria-label="Default select example"
         [(ngModel)]="idSubCategory"  >
        
          <option selected>בחר תת קטגוריה</option>
          <option *ngFor="let t of listSubcategoryByCategory" [ngValue]="t.id" >
              <label> {{t.detail}} </label>
          </option>
      </select> 
          </ng-template>

  </div>


  </div>

    <h6 *ngIf=" DateStart > DateEnd" style="color: red;">תאריך התחלת התקופה אינו יכול להיות גדול מתאריך סיום התקופה
    </h6>
  </div>
  <br/>


<!-- <app-search></app-search> -->

<table class="table table-success table-striped">
  <thead>
    <tr>
      <th scope="col"> <img style="width: 20px; " title="עריכה" src="../../../../assets/image/Update.png">  </th>
      <th scope="col">תאריך</th>
      <th scope="col">סכום</th>
      <th scope="col">קטגוריה</th>
      <th scope="col">קטגוריה משנית</th>
      <th scope="col">פרטים</th>
      <th scope="col">אופן התשלום</th>
      <th scope="col">הוצאה קבועה</th>
      <th scope="col">סטטוס הוצאה</th>
      <th scope="col"> אסמכתא</th>
      <th scope="col">יתרה מצטברת</th>
    </tr>
  </thead>
  
  <tbody *ngFor=" let e of ExpensesList; let i=index;">

    <tr>
      <th>
        <button style="border:none" onmouseover="this.style.backgroundColor='#046036'" onmouseout="this.style.backgroundColor=null" scope="row" (click)="UpdateExpense(e)"><img style="width: 20px; " title="עריכה" src="../../../../assets/image/Update.png"></button>
       </th>
      <td>{{e.date | date: 'dd/MM/yyyy' }}</td>
      <td>{{e.sum | number: '1.0-0' }}</td>
      <td>{{e.categoryDetail}}</td>
      <td>{{e.subcategoryDetail}}</td>
      <td>{{e.detail}}</td>
      <td>{{e.paymentMethodDetail}}</td>
      <td><i *ngIf="e.frequency" class="bi bi-check"></i></td>
      <td>{{e.statusDetail}}</td>
      <td>{{e.document}}</td>
      <td>{{SumExpenses(i) | number: '1.0-0' }}</td>

    </tr>


  </tbody>

</table>